<canvas id="gameCanvas" width="400" height="400"><canvas>
<script>

const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
ctx.canvas.width  = (window.innerWidth * .9);
ctx.canvas.height = (window.innerHeight * .9);
canvas.style = 'border:10px solid red';

let snake = [  {x: 200, y: 200},  {x: 190, y: 200},  {x: 180, y: 200},  {x: 170, y: 200},  {x: 160, y: 200}];
let direction = "R";
const partSize = 10;

function debounce(func, wait = 70, immediate = true) {
      var timeout;
      return function() {
        var context = this, args = arguments;
        var later = function() {
          timeout = null;
          if (!immediate) func.apply(context, args);
        };
        var callNow = immediate && !timeout;
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
        if (callNow) func.apply(context, args);
      };
};


function clearCanvas() {
    ctx.fillStyle = 'white';
    ctx.fillRect(0,0,canvas.width,canvas.height);
}


function drawSnakePart(part) {
    ctx.fillRect(part.x, part.y, partSize,partSize);
}

function drawSnake(snk) {
    ctx.fillStyle = 'black';
    snk.forEach(drawSnakePart);
}

function moveSnake(snk) {
    console.log(direction);
    const sec = snk[0];
    snk.pop();
    var p;
    if (direction == "R") {
        p = {x: sec.x + partSize, y: sec.y}; 
    }
    if (direction == "L") {
        p = {x: sec.x - partSize, y: sec.y}; 
    }
    if (direction == "U") {
        p = {x: sec.x, y: sec.y - partSize}; 
    }
    if (direction == "D") {
        p = {x: sec.x, y: sec.y + partSize}; 
    }
    snk.unshift(p);
    return snk; 
}

function changeDirection(event) {
        const key = event.keyCode;
        const LEFT_KEY = 37;
        const RIGHT_KEY = 39;
        const UP_KEY = 38;
        const DOWN_KEY = 40;

    if (key == LEFT_KEY && direction != "R") {
        direction = "L";
    }
    if (key == RIGHT_KEY && direction != "L") {
        direction = "R";
    }
    if (key == DOWN_KEY && direction != "U") {
        direction = "D";
    }
    if (key == UP_KEY && direction != "D") {
        direction = "U";
    }
}

function setup() {
        clearCanvas();
        drawSnake(snake);
}

function main() {
        setTimeout(function() {
                clearCanvas();
                snake = moveSnake(snake);
            console.log(snake);
                drawSnake(snake);
                main();
        }, 100);
}

setup()
main()

document.addEventListener("keydown",debounce(changeDirection));

</script>















